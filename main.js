!function(t){function e(e){for(var r,s,i=e[0],u=e[1],l=e[2],p=0,f=[];p<i.length;p++)s=i[p],a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(c&&c(e);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={0:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;o.push([23,1]),n()}([function(t,e){t.exports=React},,,,,,,function(t,e){t.exports=ReactDOM},,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(7),s=n.n(o),i=n(3),u=n(11),l=n(2),c=function(){function t(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}for(var e=0,n=function(t,e){for(var n=0,r=0;10>r;r+=1)n+=Math.random();return t+n/10*(e-t+1)},r=["ad","adipiscing","aliqua","aliquip","amet","anim","aute","cillum","commodo","consectetur","consequat","culpa","cupidatat","deserunt","do","dolor","dolore","duis","ea","eiusmod","elit","enim","esse","est","et","eu","ex","excepteur","exercitation","fugiat","id","in","incididunt","ipsum","irure","labore","laboris","laborum","lorem","magna","minim","mollit","nisi","non","nostrud","nulla","occaecat","officia","pariatur","proident","qui","quis","reprehenderit","sed","sint","sit","sunt","tempor","ullamco","ut","ut","velit","veniam","voluptate"],a=t(["Adam","Bertil","Cesar","David","Erik","Filip","Gustav","Helge","Ivar","Johan","Kalle","Ludvig","Martin","Niklas","Olof","Petter","Qvintus","Rudolf","Sigurd","Tore","Urban","Viktor","Wilhelm","Xerxes","Yngve","Zäta","Åke","Ärlig","Östen"]),o=function(){t(r);for(var o="",s=0,i=n(1,r.length-1);i>s;s++)o=o+" "+r[s];return{date:new Date(n((new Date).getTime()-2592e3,(new Date).getTime()+2592e3)),text:o.trim(),id:e++,active:Math.random()<.5,userId:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}(0,a.length-1)}},s={},i=0,u=n(10,50);u>i;i++){var l=o();s[l.id]=l}var c=function(t,e,n,r,a,o,s){if("string"==typeof t&&"string"==typeof e&&e.length>0&&"/"===e.charAt(0)&&"string"==typeof a&&"object"==typeof o&&null!==o&&o.hasOwnProperty("Content-Type")&&"application/json"===o["Content-Type"]){var i,u=e.substring(1,e.length);try{i=JSON.parse(a)}catch(t){}return p.hasOwnProperty(u)?p[u].call(null,t.toLowerCase(),s,i):(s.status=404,"")}return s.status=500,""},p={getitems:function(t,e){if("get"===t.toLowerCase()){var n=[];for(var r in s)n.push(s[r]);return e.status=200,JSON.stringify(n)}return e.status=405,""},getitem:function(t,e,n){var r;return"get"===t.toLowerCase()?"number"!=typeof n&&"string"!=typeof n||!s.hasOwnProperty(n)?(e.status=204,JSON.stringify({})):(r=s[n],e.status=200,JSON.stringify(r)):(e.status=405,"")},putitem:function(t,n,r){return"put"===t.toLowerCase()?"object"==typeof r&&null!==r&&r.hasOwnProperty("date")&&r.hasOwnProperty("text")&&r.hasOwnProperty("active")&&r.hasOwnProperty("userId")?(r.hasOwnProperty("id")&&s.hasOwnProperty(r.id)?s[r.id]=r:(r.id=e++,s[r.id]=r),n.status=200,JSON.stringify(r.id)):(n.status=400,""):(n.status=405,"")},getusers:function(t,e){return"get"===t.toLowerCase()?(e.status=200,JSON.stringify(a)):(e.status=405,"")},getuser:function(t,e,n){return"get"===t.toLowerCase()?(n=parseInt(n),!isNaN(n)&&n>=0&&n<a.length?(e.status=200,JSON.stringify(a[n])):(e.status=400,"")):(e.status=405,"")}};return{XMLHttpRequest:function(){var t=null,e=null,r=!0,a={"Content-Type":"application/json"},o=null,s=null,i=!1,u={onreadystatechange:null,readyState:0,response:"",responseText:null,responseType:"",responseURL:"",responeXML:null,status:0,statusText:"",timeout:0,ontimeout:null,upload:null,withCredentials:!1,abort:function(){null!==o&&clearTimeout(o)},getAllResponseHeaders:function(){},getResponseHeader:function(t){},open:function(n,a,o,s,i){if("string"!=typeof n)throw new Error("Argument: method must be a string");if(t=n.toUpperCase(),"string"!=typeof a)throw new Error("Argument: url must be a string");e=a,r="boolean"==typeof o?o:r,"function"==typeof u.onreadystatechange&&(u.readyState=1,setTimeout(u.onreadystatechange,1))},overrideMimeType:function(){},send:function(l){if(l="string"==typeof l?l:"",null===o)if("function"==typeof u.onreadystatechange&&(u.readyState=2,setTimeout(u.onreadystatechange,0)),u.timeout>0&&null===s&&(s=setTimeout(function(){s=null,i=!0,null!==o&&clearTimeout(o),u.readyState=4,"function"==typeof u.ontimeout&&setTimeout(u.ontimeout,1),"function"==typeof u.onreadystatechange&&setTimeout(u.onreadystatechange,1)},u.timeout)),Math.random()>=.2){var p=function(){o=null,null!==s&&clearTimeout(s),u.responseText=c(t,e,0,0,l,a,u),"function"==typeof u.onreadystatechange&&(u.readyState=4,u.onreadystatechange())};if(r)o=setTimeout(p,n(100,1600));else{for(var f=(new Date).getTime()+n(100,1600);(new Date).getTime()<f;);if(i)return;setTimeout(p,0)}}else if(!r)if(u.timeout>0)for(;i;);else for(f=(new Date).getTime()+u.timeout;!i||(new Date).getTime()<f;);},setRequestHeaders:function(t,e){if("number"!=typeof t&&"string"!=typeof t&&"number"!=typeof e&&"string"!=typeof e)throw new Error("Arguments both header and value must be numbers or strings");a[t]=e}};return u}}}();var p=(t,e,...n)=>new Promise((r,a)=>{const o=c.XMLHttpRequest();o.timeout=2e3,o.ontimeout=a,o.onreadystatechange=(()=>{4===o.readyState&&(200===o.status?r(o.responseText):a({state:o.readyState,status:o.status}))}),o.open(t,e),o.send(...n.map(t=>JSON.stringify(t)))});const f=t=>({type:"ERROR",payload:t}),m=()=>async t=>{t({type:"REQUEST_USERS"});try{const e=await p("GET","/getusers");t((t=>({type:"RECEIVE_USERS",payload:t}))(JSON.parse(e)))}catch(e){t(f("Uh oh, there was a problem when getting the users."))}},d=()=>async t=>{t({type:"REQUEST_DATA"});try{const e=await p("GET","/getitems");t((t=>({type:"RECEIVE_DATA",payload:t}))(JSON.parse(e)))}catch(e){t(f("Uh oh, there was a problem when getting the items."))}},h=t=>async e=>{e((t=>({type:"ADD_UPDATING_ITEM",payload:t}))(t.id));try{await p("PUT","/putitem",t),e((t=>({type:"REMOVE_UPDATING_ITEM",payload:t}))(t.id))}catch(t){e(f("Uh oh, there was a problem updating the item."))}};var y=(t={},e)=>{switch(e.type){case"ERROR":return((t,{payload:e})=>({...t,errors:[...t.errors||[],e]}))(t,e);case"ADD_UPDATING_ITEM":return((t,{payload:e})=>({...t,updatingItems:[...t.updatingItems||[],e]}))(t,e);case"REMOVE_UPDATING_ITEM":return((t,{payload:e})=>({...t,updatingItems:[...(t.updatingItems||[]).filter(t=>t!==e)]}))(t,e);case"REQUEST_DATA":return(t=>({...t,isFetching:!0,errors:!1}))(t);case"RECEIVE_DATA":return((t,{payload:e})=>({...t,isFetching:!t.users,errors:!1,items:[...e]}))(t,e);case"REQUEST_USERS":return(t=>({...t,isFetching:!0,errors:!1}))(t);case"RECEIVE_USERS":return((t,{payload:e})=>({...t,isFetching:!t.items,errors:!1,users:[...e]}))(t,e)}return t},g=n(12),E=n.n(g),v=(n(18),function(){return E.a.createElement("h1",{className:"title"},"Example List")}),b=(n(19),function(t){var e=t.message;return a.a.createElement("div",{className:"error-message"},e)}),w=(n(20),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},T=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&(n[r[a]]=t[r[a]])}return n},S=function(){return a.a.createElement("div",{className:"table-header"},a.a.createElement("span",null,"Text"),a.a.createElement("span",null,"Date"),a.a.createElement("span",null,"Owner"),a.a.createElement("span",null,"Status"),a.a.createElement("span",null))},_=function(t){function e(e){var n=t.call(this,e)||this;return n.handleInputChange=function(t){var e,r=t.target,a="checkbox"===r.type?r.checked:r.value;n.setState(((e={})[r.name]=a,e))},n.onEditEnable=function(){n.setState({isEditing:!0})},n.onEditCancel=function(){n.setState({isEditing:!1})},n.onSubmit=function(t){t.preventDefault();var e=n.state,r=(e.isEditing,T(e,["isEditing"]));n.props.onUpdateItem(O({},r))},n.state=O({isEditing:!1},e.item),n}return w(e,t),e.prototype.render=function(){return this.state.isEditing?a.a.createElement("form",{className:"table-row",onSubmit:this.onSubmit},a.a.createElement("input",{name:"text",type:"text",value:this.state.text,onChange:this.handleInputChange}),a.a.createElement("input",{name:"date",type:"text",value:this.state.date,onChange:this.handleInputChange}),a.a.createElement("input",{name:"owner",ype:"text",value:this.state.userId,onChange:this.handleInputChange}),a.a.createElement("span",{className:"status"},a.a.createElement("input",{name:"status",type:"checkbox",checked:!!this.state.status,onChange:this.handleInputChange})),a.a.createElement("span",{className:"edit"},a.a.createElement("button",{type:"submit"},"Save"),a.a.createElement("button",{onClick:this.onEditCancel},"Cancel"))):a.a.createElement("div",{className:"table-row"},a.a.createElement("span",null,this.state.text.slice(0,12)+"..."),a.a.createElement("span",null,this.state.date.slice(0,10)),a.a.createElement("span",null,this.props.user),a.a.createElement("span",{className:"status"},a.a.createElement("span",{className:this.state.status?"enabled":null})),a.a.createElement("span",{className:"edit"},a.a.createElement("button",{onClick:this.onEditEnable},"Edit")))},e}(a.a.Component),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.render=function(){var t=this.props,e=t.users,n=t.items,r=t.onUpdateItem;return a.a.createElement("div",{className:"table"},a.a.createElement(S,null),n.map(function(t){return a.a.createElement(_,{key:t.id,user:e[t.userId],item:t,onUpdateItem:r})}))},e}(a.a.Component),I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.retry=function(){var t=e.props.dispatch;t(m()),t(d())},e.updateItem=function(t){(0,e.props.dispatch)(h(t))},e}return I(e,t),e.prototype.componentDidMount=function(){var t=this.props.dispatch;t(m()),t(d())},e.prototype.render=function(){var t=this.props,e=t.errors,n=t.users,r=t.items,o=t.isFetching;return e&&e.length?a.a.createElement("div",null,e.map(function(t,e){return a.a.createElement(b,{key:e,message:t})}),a.a.createElement("hr",null),a.a.createElement("button",{onClick:this.retry},"Retry")):o?a.a.createElement("div",null,"Loading..."):n&&r?a.a.createElement(C,{users:n,items:r,onUpdateItem:this.updateItem}):null},e}(a.a.Component),R=Object(i.b)(function(t){return console.log(t),t})(P),x=(n(21),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v,null),a.a.createElement(R,null))}),N=(n(22),Object(l.c)(y,Object(l.a)(u.a)));s.a.render(a.a.createElement(i.a,{store:N},a.a.createElement(x,null)),document.getElementById("app"))}]);