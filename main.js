!function(e){function t(t){for(var r,i,s=t[0],u=t[1],l=t[2],p=0,f=[];p<s.length;p++)i=s[p],a[i]&&f.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;o.push([24,1]),n()}([function(e,t){e.exports=React},,,,,,,function(e,t){e.exports=ReactDOM},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),i=n.n(o),s=n(3),u=n(11),l=n(12),c=n.n(l),p=n(2),f=function(){function e(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}for(var t=0,n=function(e,t){for(var n=0,r=0;10>r;r+=1)n+=Math.random();return e+n/10*(t-e+1)},r=["ad","adipiscing","aliqua","aliquip","amet","anim","aute","cillum","commodo","consectetur","consequat","culpa","cupidatat","deserunt","do","dolor","dolore","duis","ea","eiusmod","elit","enim","esse","est","et","eu","ex","excepteur","exercitation","fugiat","id","in","incididunt","ipsum","irure","labore","laboris","laborum","lorem","magna","minim","mollit","nisi","non","nostrud","nulla","occaecat","officia","pariatur","proident","qui","quis","reprehenderit","sed","sint","sit","sunt","tempor","ullamco","ut","ut","velit","veniam","voluptate"],a=e(["Adam","Bertil","Cesar","David","Erik","Filip","Gustav","Helge","Ivar","Johan","Kalle","Ludvig","Martin","Niklas","Olof","Petter","Qvintus","Rudolf","Sigurd","Tore","Urban","Viktor","Wilhelm","Xerxes","Yngve","Zäta","Åke","Ärlig","Östen"]),o=function(){e(r);for(var o="",i=0,s=n(1,r.length-1);s>i;i++)o=o+" "+r[i];return{date:new Date(n((new Date).getTime()-2592e3,(new Date).getTime()+2592e3)),text:o.trim(),id:t++,active:Math.random()<.5,userId:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(0,a.length-1)}},i={},s=0,u=n(10,50);u>s;s++){var l=o();i[l.id]=l}var c=function(e,t,n,r,a,o,i){if("string"==typeof e&&"string"==typeof t&&t.length>0&&"/"===t.charAt(0)&&"string"==typeof a&&"object"==typeof o&&null!==o&&o.hasOwnProperty("Content-Type")&&"application/json"===o["Content-Type"]){var s,u=t.substring(1,t.length);try{s=JSON.parse(a)}catch(e){}return p.hasOwnProperty(u)?p[u].call(null,e.toLowerCase(),i,s):(i.status=404,"")}return i.status=500,""},p={getitems:function(e,t){if("get"===e.toLowerCase()){var n=[];for(var r in i)n.push(i[r]);return t.status=200,JSON.stringify(n)}return t.status=405,""},getitem:function(e,t,n){var r;return"get"===e.toLowerCase()?"number"!=typeof n&&"string"!=typeof n||!i.hasOwnProperty(n)?(t.status=204,JSON.stringify({})):(r=i[n],t.status=200,JSON.stringify(r)):(t.status=405,"")},putitem:function(e,n,r){return"put"===e.toLowerCase()?"object"==typeof r&&null!==r&&r.hasOwnProperty("date")&&r.hasOwnProperty("text")&&r.hasOwnProperty("active")&&r.hasOwnProperty("userId")?(r.hasOwnProperty("id")&&i.hasOwnProperty(r.id)?i[r.id]=r:(r.id=t++,i[r.id]=r),n.status=200,JSON.stringify(r.id)):(n.status=400,""):(n.status=405,"")},getusers:function(e,t){return"get"===e.toLowerCase()?(t.status=200,JSON.stringify(a)):(t.status=405,"")},getuser:function(e,t,n){return"get"===e.toLowerCase()?(n=parseInt(n),!isNaN(n)&&n>=0&&n<a.length?(t.status=200,JSON.stringify(a[n])):(t.status=400,"")):(t.status=405,"")}};return{XMLHttpRequest:function(){var e=null,t=null,r=!0,a={"Content-Type":"application/json"},o=null,i=null,s=!1,u={onreadystatechange:null,readyState:0,response:"",responseText:null,responseType:"",responseURL:"",responeXML:null,status:0,statusText:"",timeout:0,ontimeout:null,upload:null,withCredentials:!1,abort:function(){null!==o&&clearTimeout(o)},getAllResponseHeaders:function(){},getResponseHeader:function(e){},open:function(n,a,o,i,s){if("string"!=typeof n)throw new Error("Argument: method must be a string");if(e=n.toUpperCase(),"string"!=typeof a)throw new Error("Argument: url must be a string");t=a,r="boolean"==typeof o?o:r,"function"==typeof u.onreadystatechange&&(u.readyState=1,setTimeout(u.onreadystatechange,1))},overrideMimeType:function(){},send:function(l){if(l="string"==typeof l?l:"",null===o)if("function"==typeof u.onreadystatechange&&(u.readyState=2,setTimeout(u.onreadystatechange,0)),u.timeout>0&&null===i&&(i=setTimeout(function(){i=null,s=!0,null!==o&&clearTimeout(o),u.readyState=4,"function"==typeof u.ontimeout&&setTimeout(u.ontimeout,1),"function"==typeof u.onreadystatechange&&setTimeout(u.onreadystatechange,1)},u.timeout)),Math.random()>=.2){var p=function(){o=null,null!==i&&clearTimeout(i),u.responseText=c(e,t,0,0,l,a,u),"function"==typeof u.onreadystatechange&&(u.readyState=4,u.onreadystatechange())};if(r)o=setTimeout(p,n(100,1600));else{for(var f=(new Date).getTime()+n(100,1600);(new Date).getTime()<f;);if(s)return;setTimeout(p,0)}}else if(!r)if(u.timeout>0)for(;s;);else for(f=(new Date).getTime()+u.timeout;!s||(new Date).getTime()<f;);},setRequestHeaders:function(e,t){if("number"!=typeof e&&"string"!=typeof e&&"number"!=typeof t&&"string"!=typeof t)throw new Error("Arguments both header and value must be numbers or strings");a[e]=t}};return u}}}();var d=(e,t,...n)=>new Promise((r,a)=>{const o=f.XMLHttpRequest();o.timeout=2e3,o.ontimeout=a,o.onreadystatechange=(()=>{4===o.readyState&&(200===o.status?r(JSON.parse(o.responseText)):a({state:o.readyState,status:o.status}))}),o.open(e,t),o.send(...n.map(e=>JSON.stringify(e)))});const m=e=>({type:"ADD_REQUEST_ERROR",payload:e}),y=()=>async e=>{e({type:"REQUEST_USERS"});try{e((e=>({type:"RECEIVE_USERS",payload:e}))(await d("GET","/getusers")))}catch(t){e({type:"REQUEST_REJECTED"}),e(m("Uh oh, there was a problem getting the users."))}},h=()=>async e=>{e({type:"REQUEST_DATA"});try{e((e=>({type:"RECEIVE_DATA",payload:e}))(await d("GET","/getitems")))}catch(t){e({type:"REQUEST_REJECTED"}),e(m("Uh oh, there was a problem getting the items."))}},g={errors:[],isFetching:0,users:[],items:[]};const E=e=>({type:"REMOVE_UPDATING_ITEM",payload:e}),v=e=>async t=>{const{id:n}=e;t((e=>({type:"REMOVE_FAILED_ITEM",payload:e}))(n)),t((e=>({type:"ADD_UPDATING_ITEM",payload:e}))(n));try{await d("PUT","/putitem",e),t(E(n))}catch(e){t(E(n)),t((e=>({type:"ADD_FAILED_ITEM",payload:e}))(n))}},b={updating:[],failed:[]};var O=Object(p.c)({request:(e=g,t)=>{switch(t.type){case"ADD_REQUEST_ERROR":return((e,{payload:t})=>({...e,errors:[...e.errors,t]}))(e,t);case"REQUEST_DATA":return(e=>({...e,errors:[],isFetching:e.isFetching+1}))(e);case"RECEIVE_DATA":return((e,{payload:t})=>{const n=e.isFetching-1;return{...e,isFetching:n,errors:n?[...e.errors]:[],items:[...t]}})(e,t);case"REQUEST_USERS":return(e=>({...e,errors:[],isFetching:e.isFetching+1}))(e);case"RECEIVE_USERS":return((e,{payload:t})=>{const n=e.isFetching-1;return{...e,isFetching:n,errors:n?[...e.errors]:[],users:[...t]}})(e,t);case"REQUEST_REJECTED":return(e=>({...e,isFetching:e.isFetching-1}))(e)}return e},item:(e=b,t)=>{switch(t.type){case"ADD_UPDATING_ITEM":return((e,{payload:t})=>({...e,updating:[...e.updating,t]}))(e,t);case"REMOVE_UPDATING_ITEM":return((e,{payload:t})=>({...e,updating:[...e.updating.filter(e=>e!==t)]}))(e,t);case"ADD_FAILED_ITEM":return((e,{payload:t})=>({...e,failed:[...e.failed,t]}))(e,t);case"REMOVE_FAILED_ITEM":return((e,{payload:t})=>({...e,failed:[...e.failed.filter(e=>e!==t)]}))(e,t)}return e}}),T=n(13),w=n.n(T),_=(n(19),function(){return w.a.createElement("h1",{className:"title"},"Example List")}),S=(n(20),function(e){var t=e.message;return a.a.createElement("div",{className:"error-message"},t)}),R=(n(21),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},C=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},P=function(){return a.a.createElement("div",{className:"table-header"},a.a.createElement("span",null,"Text"),a.a.createElement("span",null,"Date"),a.a.createElement("span",null,"Owner"),a.a.createElement("span",null,"Status"),a.a.createElement("span",null))},j=function(e){function t(t){var n=e.call(this,t)||this;return n.handleInputChange=function(e){var t,r=e.target,a="checkbox"===r.type?r.checked:r.value;n.setState(((t={})[r.name]=a,t))},n.onEditEnable=function(){n.setState({isEditing:!0})},n.onEditCancel=function(){n.setState({isEditing:!1})},n.onSubmit=function(e){e.preventDefault();var t=n.state,r=(t.isEditing,I(t,["isEditing"]));n.props.onUpdate(D({},r)),n.setState({isEditing:!1})},n.state=D({isEditing:!1},t.item),n}return R(t,e),t.prototype.render=function(){var e=this.state,t=e.text,n=e.date,r=e.userId,o=e.status,i=e.isEditing,s=this.props,u=s.user,l=s.isUpdating;return s.failedToUpdate?a.a.createElement("div",{className:"table-row"},a.a.createElement(S,{message:"Failed to update item."}),a.a.createElement("button",{onClick:this.onSubmit},"Retry")):l?a.a.createElement("div",{className:"table-row"},"Updating item..."):i?a.a.createElement("form",{className:"table-row",onSubmit:this.onSubmit},a.a.createElement("input",{name:"text",type:"text",value:t,onChange:this.handleInputChange}),a.a.createElement("input",{name:"date",type:"text",value:n,onChange:this.handleInputChange}),a.a.createElement("input",{name:"owner",ype:"text",value:r,onChange:this.handleInputChange}),a.a.createElement("span",{className:"status"},a.a.createElement("input",{name:"status",type:"checkbox",checked:!!o,onChange:this.handleInputChange})),a.a.createElement("span",{className:"edit"},a.a.createElement("button",{type:"submit"},"Save"),a.a.createElement("button",{onClick:this.onEditCancel},"Cancel"))):a.a.createElement("div",{className:"table-row"},a.a.createElement("span",null,t.slice(0,12)+"..."),a.a.createElement("span",null,n.slice(0,10)),a.a.createElement("span",null,u),a.a.createElement("span",{className:"status"},a.a.createElement("span",{className:o?"enabled":null})),a.a.createElement("span",{className:"edit"},a.a.createElement("button",{onClick:this.onEditEnable},"Edit")))},t}(a.a.Component),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateItem=function(e){(0,t.props.dispatch)(v(e))},t}return R(t,e),t.prototype.render=function(){var e=this,t=this.props.request,n=t.users,r=t.items,o=this.props.item,i=o.updating,s=o.failed;return a.a.createElement("div",{className:"table"},a.a.createElement(P,null),r.map(function(t){return a.a.createElement(j,{key:t.id,user:n[t.userId],item:t,onUpdate:e.updateItem,isUpdating:i.includes(t.id),failedToUpdate:s.includes(t.id)})}))},t=C([Object(s.b)(function(e){return e})],t)}(a.a.Component),M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.retry=function(){var e=t.props.dispatch;e(y()),e(h())},t}return M(t,e),t.prototype.componentDidMount=function(){var e=this.props.dispatch;e(y()),e(h())},t.prototype.render=function(){var e=this.props,t=e.errors,n=e.users,r=e.items,o=e.isFetching;return t.length?a.a.createElement("div",null,t.map(function(e,t){return a.a.createElement(S,{key:t,message:e})}),a.a.createElement("hr",null),a.a.createElement("button",{onClick:this.retry},"Retry")):o?a.a.createElement("div",null,"Loading..."):n.length&&r.length?a.a.createElement(A,null):null},t=U([Object(s.b)(function(e){return e.request})],t)}(a.a.Component),x=(n(22),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null),a.a.createElement(N,null))}),F=(n(23),Object(p.d)(O,Object(p.a)(c.a,u.a)));i.a.render(a.a.createElement(s.a,{store:F},a.a.createElement(x,null)),document.getElementById("app"))}]);